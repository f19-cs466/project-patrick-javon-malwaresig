// CS466 Project
// By Javon Kitson, Patrick Sacchet
// Due November 22nd at Midnight

#include <stdio.h>  
#include <unistd.h>  
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>

//int OUTPUT = 1; //output will print unless otherwise specified
int RUNNING = 1;
const int NUM_DIRECTORIES = 5;

// Simple function to print all options for the user
// Params - None
// Returns - None
void print_options()
{
    printf("Options:\n"
        "   -s, --scan: Run a scan on a file Ex. ./malwaresig -s filexample \n"
        "   -h, --help: display what you are reading now\n"
        "   -q, --quiet: output nothing\n");
  return;
}

// Function will print a logo for our program
// Params - None
// Returns - None
void print_logo()
{
  // Print our cool logo (thanks Javon :))
  printf(R"EOF(
      ███╗   ███╗ █████╗ ██╗     ██╗    ██╗ █████╗ ██████╗ ███████╗███████╗██╗ ██████╗
      ████╗ ████║██╔══██╗██║     ██║    ██║██╔══██╗██╔══██╗██╔════╝██╔════╝██║██╔════╝
      ██╔████╔██║███████║██║     ██║ █╗ ██║███████║██████╔╝█████╗  ███████╗██║██║  ███╗
      ██║╚██╔╝██║██╔══██║██║     ██║███╗██║██╔══██║██╔══██╗██╔══╝  ╚════██║██║██║   ██║
      ██║ ╚═╝ ██║██║  ██║███████╗╚███╔███╔╝██║  ██║██║  ██║███████╗███████║██║╚██████╔╝
      ╚═╝     ╚═╝╚═╝  ╚═╝╚══════╝ ╚══╝╚══╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝╚══════╝╚═╝ ╚═════╝
  )EOF");
  printf("\n");
  return;
}

// Function will create test directories with test files so we can scan them
// Params - None
// Returns - None
void create_directories()
{
  // Initialize array of test directories (still need to set size)
  char *test_dir[] = {"test_dir1", "test_dir2", "test_dir3", "test_dir4", "test_dir5"};
  int result;
  for(int i = 0; i < NUM_DIRECTORIES; i++)
  {
    // 0777 is the access code for all users to be able to access
    result = mkdir(test_dir[i], 0777);
    // Directory made successfully
    if(!result)
    {
      printf("Directory created successfully\n");
    }
    // We failed in creating the directory
    else
    {
      printf("Looks like the directory might already exist?\n");
    }
  }
  return;
}

// Main function
int main(int argc, char *argv[])
{
  //Get input from the user
  int opt;

  // Print the logo of course
  print_logo();

  // put ':' in the starting of the 
	// string so that program can 
	// distinguish between '?' and ':' 

  // parse through input arguments to run the right commands
	while((opt = getopt(argc, argv, ":if:shq")) != -1) 
	{ 
		switch(opt) 
		{ 
			case 's':
        printf("scan: %c\n", opt); 
				break; 
			case 'h':
        // print the options for the user
        print_options();
				break;
			case 'q':
        print_options();
				break;
			case 'f': 
				printf("filename: %s\n", optarg); 
				break; 
			case ':': 
				printf("option needs a value\n"); 
				break; 
			case '?': 
				printf("unknown option: %c\n", optopt);
        printf("Use -h for help page\n");
				break; 
		} 
	} 
	
	// optind is for the extra arguments 
	// which are not parsed 
	for(; optind < argc; optind++){	 
		printf("unknown arguments: %s\n", argv[optind]);
    printf("Use -h for help page\n");
	}

    return 0;
}
